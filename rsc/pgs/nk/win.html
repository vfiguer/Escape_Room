<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>North Korea</title>
    <link rel="stylesheet" href="../../css/historia.css"/>
</head>
<body>
    <div class="container">    
        <div class="text">
        <a class="historia">
            <p>La puerta se abre revelando un pasadizo secreto que os conduce a la libertad. Sigilosamente, os deslizáis por los pasillos del hotel, evitando a la seguridad y a cualquier mirada sospechosa. Finalmente, salís a la noche de Los Ángeles, el aire fresco de la libertad golpeando vuestros rostros.
            </p>
            <p>Con la cerradura para la libertad en mano, tú y Ji-hoon lográis salir del hotel sin ser detectados. En las calles de Los Ángeles, os encontráis con personas de diversas culturas y experiencias, experimentando la verdadera diversidad que el mundo exterior tiene para ofrecer.
            </p>
            <p>Decidís mantener un perfil bajo, conscientes de las consecuencias que enfrentaríais si el régimen descubriera vuestra huida. Planeáis cuidadosamente cada paso, utilizando la cerradura como un símbolo de vuestra valentía y determinación.
            </p>
            <p>Mientras os adaptáis a la vida en la libertad, cada día se convierte en una nueva oportunidad para explorar, aprender y crecer. La cerradura para la libertad se convierte en un recordatorio constante de vuestra victoria sobre la opresión, y ahora, tenéis la posibilidad de construir un futuro diferente al que alguna vez soñasteis en Corea del Norte. Este es un final exitoso, donde la cerradura para la libertad se convierte en la llave de vuestra nueva vida.
            </p>
        </a> 
        <p class="eleccion" id="felicidades"></p>
        <p class="eleccion"><a href="../lobby.html">Volver al menu</a></p>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const username = localStorage.getItem('currentUsername'); 
        const tiempo = localStorage.getItem('timer');
        const clues = localStorage.getItem('clues')
        let puntuacion = 1000 - tiempo - clues*100

        let minutos = Math.trunc(tiempo/60)
        let segundos = tiempo%60

        let ranking = JSON.parse(localStorage.getItem('ranking')) || [];
        ranking.push({ username, tiempo: parseInt(tiempo), puntuacion });
        localStorage.setItem('ranking', JSON.stringify(ranking));

        const mensajeElement = document.getElementById('felicidades');
        mensajeElement.textContent = `Felicidades ${username} tu tiempo fue de ${minutos} minutos, ${segundos} segundos y una puntuacion de ${puntuacion}`;
        localStorage.setItem('timer', '0');
        localStorage.setItem('clues', '0')
        localStorage.setItem('ultimaUbicacion', '0')
    });
</script>
</div>
</body>
</html>